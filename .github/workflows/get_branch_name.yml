name: Get Branch Name 

on:
  pull_request: 
    branches: [ "development" ]

jobs:
  set_head_branch_name:
    permissions: write-all
    runs-on: ubuntu-latest
    steps: 
      - name: Get branch names
        id: branch-name
        uses: tj-actions/branch-names@v7
      
      - name: Get Head Ref branch name (i.e The current pull request branch)
        run: |
          echo "${{ steps.branch-name.outputs.head_ref_branch }}"

      - name: Sanitize Branch Name
        id: sanitize-branch-name
        uses: frabert/replace-string-action@v2
        with:
          pattern: 'Hello, (\w+)!'
          string: 'Hello, world!'
          replace-with: 'I greet you, $1!'
      
      - name: Modify head_branch.txt
        uses: jaywcjlove/github-action-modify-file-content@main
        with:
          branch: "${{ steps.sanitize-branch-name.outputs.replace-with }}"
          path: head_branch.txt
          body: "${{ steps.sanitize-branch-name.outputs.replace-with }}"
          overwrite: 'true'